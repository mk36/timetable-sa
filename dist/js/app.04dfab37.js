(function(){"use strict";var e={801:function(e,t,i){var o=i(9242),r=i(3396);function s(e,t,i,o,s,n){const a=(0,r.up)("timetable");return(0,r.wg)(),(0,r.iD)("section",null,[(0,r.Wm)(a)])}var n=i(7139);const a={class:"p-4 bg-accent min-h-[100vh]"},l=(0,r._)("h2",{class:"text-secondary font-bold text-2xl mb-4"},"Timetable",-1),d={class:"flex justify-center"},c=(0,r._)("p",{class:"w-full text-center mb-2"},"Drop your excel timetable file here",-1),p=(0,r._)("i",{class:"flex-full fa-solid fa-upload text-accent text-3xl"},null,-1),u=[c,p],_={key:0,class:"p-4 bg-secondary rounded mt-6"},h=(0,r._)("p",{class:"font-bold mb-2"},"Please select a staff member to see their timetable",-1),b=(0,r._)("option",{value:""},"Choose a staff member",-1),f=["value"],m={key:1,class:"text-secondary my-4 font-bold"},g={key:2,class:"bg-secondary rounded"},x={class:""},y=(0,r.uE)('<section class="p-2 grid sm:grid-cols-4 grid-cols-1"><p class="font-bold">Period</p><p class="font-bold">Subject</p><p class="font-bold">Room</p><p class="font-bold">Students</p></section>',1),w={key:0,class:"p-2 grid sm:grid-cols-4 grid-cols-1 border-t"},v={key:3},I=(0,r._)("h3",{class:"text-secondary my-4 font-bold"},"Responsibilities",-1),D={class:"bg-secondary rounded mt-6 p-4"};function T(e,t,i,s,c,p){return(0,r.wg)(),(0,r.iD)("section",a,[l,(0,r._)("section",d,[(0,r._)("section",{onClick:t[0]||(t[0]=(...e)=>p.openFileDialog&&p.openFileDialog(...e)),class:"cursor-pointer bg-secondary flex basis-1/2 p-12 items-center justify-center border-dashed border-4 flex-wrap"},u),(0,r._)("input",{id:"excel-input",class:"hidden",type:"file",name:"file",onInput:t[1]||(t[1]=(...e)=>p.onChangeFile&&p.onChangeFile(...e)),accept:"text/csv"},null,32)]),c.report.taList?((0,r.wg)(),(0,r.iD)("section",_,[h,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>c.taSelected=e),class:"w-full bg-accent text-secondary"},[b,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(c.report.taList,((e,t)=>((0,r.wg)(),(0,r.iD)("option",{value:e,key:e.name},(0,n.zw)(t),9,f)))),128))],512),[[o.bM,c.taSelected]])])):(0,r.kq)("",!0),c.taSelected?((0,r.wg)(),(0,r.iD)("h3",m,"Showing timetable results for: ")):(0,r.kq)("",!0),c.taSelected?((0,r.wg)(),(0,r.iD)("section",g,[(0,r._)("section",x,[y,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(c.taSelected,((e,t)=>((0,r.wg)(),(0,r.iD)("section",{key:t},[t.includes("period")?((0,r.wg)(),(0,r.iD)("section",w,[(0,r._)("p",null,(0,n.zw)(e.period),1),(0,r._)("p",null,(0,n.zw)(e.subject),1),(0,r._)("p",null,(0,n.zw)(e.room),1),(0,r._)("ul",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.students,(e=>((0,r.wg)(),(0,r.iD)("li",{key:e.name},(0,n.zw)(e.name),1)))),128))])])):(0,r.kq)("",!0)])))),128))])])):(0,r.kq)("",!0),c.report.responsibilities.length>0?((0,r.wg)(),(0,r.iD)("section",v,[I,(0,r._)("section",D,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(c.report.responsibilities,((e,t)=>((0,r.wg)(),(0,r.iD)("p",{class:(0,n.C_)(e.isTitle?"font-bold":""),key:t},(0,n.zw)(e.text),3)))),128))])])):(0,r.kq)("",!0)])}var k=i(6026),S=i.n(k),j={name:"Timetable",props:{},data(){return{weekdays:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],taSelected:"",csv:null,timetable:null,report:{periods:[],students:[],taList:null,responsibilities:[]},tableIndex:{cat:1,form:2,period_1:4,period_2:6,period_3:8,period_4:10,period_5:18,period_6:20,name:0,need:1,year_form:2,notes:3,period_1_ta:5,period_2_ta:7,period_3_ta:9,period_4_ta:11,lunch_duty:12,lunch_ta:13,period_5_ta:19,period_6_ta:21},responsibilityKeys:["lift duty","ssc/work collection","reserve","sensory circuits","taxis","laptops","physio","chair","srp"]}},mounted(){},methods:{openFileDialog(){const e=document.querySelector("#excel-input");e.click()},onChangeFile(e){this.csv=e.target.files[0],S().parse(this.csv,{encoding:"utf-8",complete:e=>{this.timetable=e.data,this.processCSV(this.timetable),this.setTaListFromStudents(this.report.students)}})},setTaListFromStudents(e){let t={};e.forEach((e=>{for(let i=1;i<7;i++){const o=e["period_"+i+"_ta"];o.forEach((o=>{o&&(t[o]||(t[o]=this.createDefaultTaObject()),t[o]["period_"+i].students.push(e),t[o]["period_"+i].room=e["period_"+i+"_room"],t[o]["period_"+i].subject=e["period_"+i],t[o]["period_"+i].period=this.report.periods[i-1])}))}})),this.report.taList=t},createDefaultTaObject(){return{period_1:this.createDefaultTaStudentObject(),period_2:this.createDefaultTaStudentObject(),period_3:this.createDefaultTaStudentObject(),period_4:this.createDefaultTaStudentObject(),period_5:this.createDefaultTaStudentObject(),period_6:this.createDefaultTaStudentObject()}},createDefaultTaStudentObject(){return{students:[],room:"",subject:"",period:""}},processCSV(e){this.report.periods=[],this.report.students=[],this.report.responsibilities=[];let t=!0,i=0,o=!1;e.forEach(((e,r)=>{if(2===r&&(this.report.periods=this.getPeriods(e)),r>3&&t){let o=""===e[0],s=o&&""===e[1]&&""===e[2];s&&(i+=1,2===i&&(t=!1)),s||(i=0,o||this.report.students.push(this.getStudent(e,r)))}if(!t){if(o){let t={isTitle:this.responsibilityKeys.includes(e[0].toLowerCase().trim()),text:e[0]};this.report.responsibilities.push(t)}this.weekdays.includes(e[0].toLowerCase().trim())&&(o=!0)}}))},getStudent(e,t){return{name:e[this.tableIndex.name],need:e[this.tableIndex.need],notes:e[this.tableIndex.notes],period_1:e[this.tableIndex.period_1],period_1_room:this.timetable[t+1][this.tableIndex.period_1],period_1_ta:this.getPeriodTasFromIndex(t,this.tableIndex.period_1_ta),period_2:e[this.tableIndex.period_2],period_2_room:this.timetable[t+1][this.tableIndex.period_2],period_2_ta:this.getPeriodTasFromIndex(t,this.tableIndex.period_2_ta),period_3:e[this.tableIndex.period_3],period_3_room:this.timetable[t+1][this.tableIndex.period_3],period_3_ta:this.getPeriodTasFromIndex(t,this.tableIndex.period_3_ta),period_4:e[this.tableIndex.period_4],period_4_room:this.timetable[t+1][this.tableIndex.period_4],period_4_ta:this.getPeriodTasFromIndex(t,this.tableIndex.period_4_ta),period_5:e[this.tableIndex.period_5],period_5_room:this.timetable[t+1][this.tableIndex.period_5],period_5_ta:this.getPeriodTasFromIndex(t,this.tableIndex.period_5_ta),period_6:e[this.tableIndex.period_6],period_6_room:this.timetable[t+1][this.tableIndex.period_6],period_6_ta:this.getPeriodTasFromIndex(t,this.tableIndex.period_6_ta)}},getPeriodTasFromIndex(e,t){return[this.timetable[e][t],this.timetable[e+1][t]]},getPeriods(e){let t=[],i="Period";for(let o=1;o<7;o++){let r="period_"+o;const s=e[this.tableIndex[r]];s&&t.push(`${i} ${o} : ${s}`)}return t}}},O=i(89);const F=(0,O.Z)(j,[["render",T]]);var P=F,C={name:"App",components:{Timetable:P}};const L=(0,O.Z)(C,[["render",s]]);var q=L;(0,o.ri)(q).mount("#app")}},t={};function i(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={exports:{}};return e[o].call(s.exports,s,s.exports,i),s.exports}i.m=e,function(){var e=[];i.O=function(t,o,r,s){if(!o){var n=1/0;for(c=0;c<e.length;c++){o=e[c][0],r=e[c][1],s=e[c][2];for(var a=!0,l=0;l<o.length;l++)(!1&s||n>=s)&&Object.keys(i.O).every((function(e){return i.O[e](o[l])}))?o.splice(l--,1):(a=!1,s<n&&(n=s));if(a){e.splice(c--,1);var d=r();void 0!==d&&(t=d)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[o,r,s]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,s,n=o[0],a=o[1],l=o[2],d=0;if(n.some((function(t){return 0!==e[t]}))){for(r in a)i.o(a,r)&&(i.m[r]=a[r]);if(l)var c=l(i)}for(t&&t(o);d<n.length;d++)s=n[d],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return i.O(c)},o=self["webpackChunktimetable"]=self["webpackChunktimetable"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=i.O(void 0,[998],(function(){return i(801)}));o=i.O(o)})();
//# sourceMappingURL=app.04dfab37.js.map